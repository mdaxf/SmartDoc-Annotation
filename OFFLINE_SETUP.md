
# Offline / Air-Gapped Environment Setup

To use SmartDoc in an environment without internet access, you must download the dependencies and bundle them locally.

## 1. Required Libraries (NPM)

If you have a build machine with internet, run this command to install all dependencies into the project. The `npm run build` command will then package most of them into the single `smart-doc.bundle.js` file.

```bash
npm install react react-dom lucide-react uuid pdfjs-dist@3.11.174 jszip docx-preview @google/genai
```

**Note:** We use `pdfjs-dist@3.11.174` because later versions only provide `.mjs` worker files which are often blocked in restrictive offline environments (MIME type mismatch issues). Version 3.11.174 provides a stable standard `.js` worker.

## 2. Static Assets (Manual Download)

Some files cannot be bundled directly into the JavaScript file and must be copied to your offline web server's folder (e.g., alongside `smart-doc.bundle.js`).

### A. PDF Worker (Required for PDF Support)
The PDF parser runs in a separate thread.
1.  **Download:** [pdf.worker.min.js](https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js)
2.  **Place in:** Your project root or `libs/` folder.
3.  **Config:** Point the `pdfWorkerSrc` config option to this file.

### B. 3D Model Viewer (Required for GLB/GLTF)
1.  **Download:** [model-viewer.min.js](https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js)
2.  **Place in:** `libs/model-viewer.min.js`
3.  **Config:** Point the `modelViewerSrc` config option to this file.

## 3. Recommended Folder Structure

For an offline deployment, your folder should look like this:

```text
/my-offline-app/
  ├── index.html              (Your app entry point)
  ├── smart-doc.bundle.js     (Generated by npm run build)
  ├── style.css               (Generated by npm run build)
  └── libs/
      ├── pdf.worker.min.js   (Downloaded manually, note .js extension)
      └── model-viewer.min.js (Downloaded manually)
```

## 4. Initialization Code (Offline)

When initializing the library in `index.html`, explicitly set the paths so the library doesn't try to fetch from a CDN.

```javascript
window.SmartDoc.create('root', {
    // ... other config ...
    
    // OFFLINE CONFIGURATION
    // Ensure these paths are correct relative to your HTML file
    pdfWorkerSrc: './libs/pdf.worker.min.js', 
    modelViewerSrc: './libs/model-viewer.min.js', 
    
    styleConfig: {
        // ...
    }
});
```

## 5. Note on AI Features
The **Auto-Annotate** feature relies on Google Gemini API, which requires internet access to `generativelanguage.googleapis.com`. This feature **will not work** in a strictly offline environment. The rest of the library (drawing, PDF viewing, editing) will function normally.
